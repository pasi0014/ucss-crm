import{r as a,ak as Z,h as ie,i as X,m as G,W as ce,k as q,n as le,o as de,a7 as fe,j as b,al as me,l as L,p as O,q as N,b as pe,a5 as ve,am as ye}from"./index-82733b58.js";import{c as he,u as be}from"./chunk-XHZNOLJR-4c9f0140.js";import{i as Me}from"./chunk-ROURZMX4-1c85f1b1.js";import{g as Ee,a as Ce}from"./chunk-3XANSPY5-cf37bc50.js";import{b as xe,u as we,a as _e}from"./index-01e141de.js";function ke(e){const{key:n}=e;return n.length===1||n.length>1&&/[^a-zA-Z0-9]/.test(n)}function Ie(e={}){const{timeout:n=300,preventDefault:t=()=>!0}=e,[s,o]=a.useState([]),r=a.useRef(),u=()=>{r.current&&(clearTimeout(r.current),r.current=null)},c=()=>{u(),r.current=setTimeout(()=>{o([]),r.current=null},n)};a.useEffect(()=>u,[]);function l(f){return i=>{if(i.key==="Backspace"){const d=[...s];d.pop(),o(d);return}if(ke(i)){const d=s.concat(i.key);t(i)&&(i.preventDefault(),i.stopPropagation()),o(d),f(d.join("")),c()}}}return l}function ge(e,n,t,s){if(n==null)return s;if(!s)return e.find(u=>t(u).toLowerCase().startsWith(n.toLowerCase()));const o=e.filter(r=>t(r).toLowerCase().startsWith(n.toLowerCase()));if(o.length>0){let r;return o.includes(s)?(r=o.indexOf(s)+1,r===o.length&&(r=0),o[r]):(r=e.indexOf(o[0]),e[r])}return s}function De(e){const n=e.current;if(!n)return!1;const t=Ee(n);return!t||n.contains(t)?!1:!!Me(t)}function Pe(e,n){const{shouldFocus:t,visible:s,focusRef:o}=n,r=t&&!s;Z(()=>{if(!r||De(e))return;const u=(o==null?void 0:o.current)||e.current;let c;if(u)return c=requestAnimationFrame(()=>{u.focus({preventScroll:!0})}),()=>{cancelAnimationFrame(c)}},[r,e,o])}function Oe(e){const{ref:n,handler:t,enabled:s=!0}=e,o=ie(t),u=a.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}).current;a.useEffect(()=>{if(!s)return;const c=d=>{$(d,n)&&(u.isPointerDown=!0)},l=d=>{if(u.ignoreEmulatedMouseEvents){u.ignoreEmulatedMouseEvents=!1;return}u.isPointerDown&&t&&$(d,n)&&(u.isPointerDown=!1,o(d))},f=d=>{u.ignoreEmulatedMouseEvents=!0,t&&u.isPointerDown&&$(d,n)&&(u.isPointerDown=!1,o(d))},i=Y(n.current);return i.addEventListener("mousedown",c,!0),i.addEventListener("mouseup",l,!0),i.addEventListener("touchstart",c,!0),i.addEventListener("touchend",f,!0),()=>{i.removeEventListener("mousedown",c,!0),i.removeEventListener("mouseup",l,!0),i.removeEventListener("touchstart",c,!0),i.removeEventListener("touchend",f,!0)}},[t,n,o,u,s])}function $(e,n){var t;const s=e.target;return s&&!Y(s).contains(s)?!1:!((t=n.current)!=null&&t.contains(s))}function Y(e){var n;return(n=e==null?void 0:e.ownerDocument)!=null?n:document}function Se(e){const{isOpen:n,ref:t}=e,[s,o]=a.useState(n),[r,u]=a.useState(!1);return a.useEffect(()=>{r||(o(n),u(!0))},[n,r,s]),xe(()=>t.current,"animationend",()=>{o(n)}),{present:!(n?!1:!s),onComplete(){var l;const f=Ce(t.current),i=new f.CustomEvent("animationend",{bubbles:!0});(l=t.current)==null||l.dispatchEvent(i)}}}function Fe(e){const{wasSelected:n,enabled:t,isSelected:s,mode:o="unmount"}=e;return!!(!t||s||o==="keepMounted"&&n)}var[Le,Ae,Re,Te]=he(),[Ne,K]=X({strict:!1,name:"MenuContext"});function Ke(e,...n){const t=a.useId(),s=e||t;return a.useMemo(()=>n.map(o=>`${o}-${s}`),[s,n])}function ee(e){var n;return(n=e==null?void 0:e.ownerDocument)!=null?n:document}function Q(e){return ee(e).activeElement===e}function ze(e={}){const{id:n,closeOnSelect:t=!0,closeOnBlur:s=!0,initialFocusRef:o,autoSelect:r=!0,isLazy:u,isOpen:c,defaultIsOpen:l,onClose:f,onOpen:i,placement:d="bottom-start",lazyBehavior:C="unmount",direction:y,computePositionOnMount:A=!1,...D}=e,x=a.useRef(null),m=a.useRef(null),w=Re(),P=a.useCallback(()=>{requestAnimationFrame(()=>{var E;(E=x.current)==null||E.focus({preventScroll:!1})})},[]),_=a.useCallback(()=>{const E=setTimeout(()=>{var k;if(o)(k=o.current)==null||k.focus();else{const j=w.firstEnabled();j&&F(j.index)}});W.current.add(E)},[w,o]),I=a.useCallback(()=>{const E=setTimeout(()=>{const k=w.lastEnabled();k&&F(k.index)});W.current.add(E)},[w]),M=a.useCallback(()=>{i==null||i(),r?_():P()},[r,_,P,i]),{isOpen:p,onOpen:h,onClose:g,onToggle:S}=we({isOpen:c,defaultIsOpen:l,onClose:f,onOpen:M});Oe({enabled:p&&s,ref:x,handler:E=>{var k;(k=m.current)!=null&&k.contains(E.target)||g()}});const z=_e({...D,enabled:p||A,placement:d,direction:y}),[R,F]=a.useState(-1);Z(()=>{p||F(-1)},[p]),Pe(x,{focusRef:m,visible:p,shouldFocus:!0});const T=Se({isOpen:p,ref:x}),[B,U]=Ke(n,"menu-button","menu-list"),v=a.useCallback(()=>{h(),P()},[h,P]),W=a.useRef(new Set([]));qe(()=>{W.current.forEach(E=>clearTimeout(E)),W.current.clear()});const oe=a.useCallback(()=>{h(),_()},[_,h]),se=a.useCallback(()=>{h(),I()},[h,I]),re=a.useCallback(()=>{var E,k;const j=ee(x.current),ae=(E=x.current)==null?void 0:E.contains(j.activeElement);if(!(p&&!ae))return;const J=(k=w.item(R))==null?void 0:k.node;J==null||J.focus()},[p,R,w]),ue=a.useRef(null);return{openAndFocusMenu:v,openAndFocusFirstItem:oe,openAndFocusLastItem:se,onTransitionEnd:re,unstable__animationState:T,descendants:w,popper:z,buttonId:B,menuId:U,forceUpdate:z.forceUpdate,orientation:"vertical",isOpen:p,onToggle:S,onOpen:h,onClose:g,menuRef:x,buttonRef:m,focusedIndex:R,closeOnSelect:t,closeOnBlur:s,autoSelect:r,setFocusedIndex:F,isLazy:u,lazyBehavior:C,initialFocusRef:o,rafId:ue}}function Be(e={},n=null){const t=K(),{onToggle:s,popper:o,openAndFocusFirstItem:r,openAndFocusLastItem:u}=t,c=a.useCallback(l=>{const f=l.key,d={Enter:r,ArrowDown:r,ArrowUp:u}[f];d&&(l.preventDefault(),l.stopPropagation(),d(l))},[r,u]);return{...e,ref:G(t.buttonRef,n,o.referenceRef),id:t.buttonId,"data-active":ce(t.isOpen),"aria-expanded":t.isOpen,"aria-haspopup":"menu","aria-controls":t.menuId,onClick:q(e.onClick,s),onKeyDown:q(e.onKeyDown,c)}}function V(e){var n;return He(e)&&!!((n=e==null?void 0:e.getAttribute("role"))!=null&&n.startsWith("menuitem"))}function Ue(e={},n=null){const t=K();if(!t)throw new Error("useMenuContext: context is undefined. Seems you forgot to wrap component within <Menu>");const{focusedIndex:s,setFocusedIndex:o,menuRef:r,isOpen:u,onClose:c,menuId:l,isLazy:f,lazyBehavior:i,unstable__animationState:d}=t,C=Ae(),y=Ie({preventDefault:m=>m.key!==" "&&V(m.target)}),A=a.useCallback(m=>{if(!m.currentTarget.contains(m.target))return;const w=m.key,_={Tab:M=>M.preventDefault(),Escape:c,ArrowDown:()=>{const M=C.nextEnabled(s);M&&o(M.index)},ArrowUp:()=>{const M=C.prevEnabled(s);M&&o(M.index)}}[w];if(_){m.preventDefault(),_(m);return}const I=y(M=>{const p=ge(C.values(),M,h=>{var g,S;return(S=(g=h==null?void 0:h.node)==null?void 0:g.textContent)!=null?S:""},C.item(s));if(p){const h=C.indexOf(p.node);o(h)}});V(m.target)&&I(m)},[C,s,y,c,o]),D=a.useRef(!1);u&&(D.current=!0);const x=Fe({wasSelected:D.current,enabled:f,mode:i,isSelected:d.present});return{...e,ref:G(r,n),children:x?e.children:null,tabIndex:-1,role:"menu",id:l,style:{...e.style,transformOrigin:"var(--popper-transform-origin)"},"aria-orientation":"vertical",onKeyDown:q(e.onKeyDown,A)}}function We(e={}){const{popper:n,isOpen:t}=K();return n.getPopperProps({...e,style:{visibility:t?"visible":"hidden",...e.style}})}function je(e={},n=null){const{onMouseEnter:t,onMouseMove:s,onMouseLeave:o,onClick:r,onFocus:u,isDisabled:c,isFocusable:l,closeOnSelect:f,type:i,...d}=e,C=K(),{setFocusedIndex:y,focusedIndex:A,closeOnSelect:D,onClose:x,menuRef:m,isOpen:w,menuId:P,rafId:_}=C,I=a.useRef(null),M=`${P}-menuitem-${a.useId()}`,{index:p,register:h}=Te({disabled:c&&!l}),g=a.useCallback(v=>{t==null||t(v),!c&&y(p)},[y,p,c,t]),S=a.useCallback(v=>{s==null||s(v),I.current&&!Q(I.current)&&g(v)},[g,s]),z=a.useCallback(v=>{o==null||o(v),!c&&y(-1)},[y,c,o]),R=a.useCallback(v=>{r==null||r(v),V(v.currentTarget)&&(f??D)&&x()},[x,r,D,f]),F=a.useCallback(v=>{u==null||u(v),y(p)},[y,u,p]),T=p===A,B=c&&!l;Z(()=>{w&&(T&&!B&&I.current?(_.current&&cancelAnimationFrame(_.current),_.current=requestAnimationFrame(()=>{var v;(v=I.current)==null||v.focus(),_.current=null})):m.current&&!Q(m.current)&&m.current.focus({preventScroll:!0}))},[T,B,m,w]);const U=be({onClick:R,onFocus:F,onMouseEnter:g,onMouseMove:S,onMouseLeave:z,ref:G(h,I,n),isDisabled:c,isFocusable:l});return{...d,...U,type:i??U.type,id:M,role:"menuitem",tabIndex:T?0:-1}}function He(e){var n;if(!$e(e))return!1;const t=(n=e.ownerDocument.defaultView)!=null?n:window;return e instanceof t.HTMLElement}function $e(e){return e!=null&&typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE}function qe(e,n=[]){return a.useEffect(()=>()=>e(),n)}var[Ve,H]=X({name:"MenuStylesContext",errorMessage:`useMenuStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Menu />" `}),Ze=e=>{const{children:n}=e,t=le("Menu",e),s=de(e),{direction:o}=fe(),{descendants:r,...u}=ze({...s,direction:o}),c=a.useMemo(()=>u,[u]),{isOpen:l,onClose:f,forceUpdate:i}=c;return b(Le,{value:r,children:b(Ne,{value:c,children:b(Ve,{value:t,children:me(n,{isOpen:l,onClose:f,forceUpdate:i})})})})};Ze.displayName="Menu";var ne=L((e,n)=>{const t=H();return b(O.span,{ref:n,...e,__css:t.command,className:"chakra-menu__command"})});ne.displayName="MenuCommand";var Ge=L((e,n)=>{const{type:t,...s}=e,o=H(),r=s.as||t?t??void 0:"button",u=a.useMemo(()=>({textDecoration:"none",color:"inherit",userSelect:"none",display:"flex",width:"100%",alignItems:"center",textAlign:"start",flex:"0 0 auto",outline:0,...o.item}),[o.item]);return b(O.button,{ref:n,type:r,...s,__css:u})}),te=e=>{const{className:n,children:t,...s}=e,o=a.Children.only(t),r=a.isValidElement(o)?a.cloneElement(o,{focusable:"false","aria-hidden":!0,className:N("chakra-menu__icon",o.props.className)}):null,u=N("chakra-menu__icon-wrapper",n);return b(O.span,{className:u,...s,__css:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:r})};te.displayName="MenuIcon";var Je=L((e,n)=>{const{icon:t,iconSpacing:s="0.75rem",command:o,commandSpacing:r="0.75rem",children:u,...c}=e,l=je(c,n),i=t||o?b("span",{style:{pointerEvents:"none",flex:1},children:u}):u;return pe(Ge,{...l,className:N("chakra-menu__menuitem",l.className),children:[t&&b(te,{fontSize:"0.8em",marginEnd:s,children:t}),i,o&&b(ne,{marginStart:r,children:o})]})});Je.displayName="MenuItem";var Qe={enter:{visibility:"visible",opacity:1,scale:1,transition:{duration:.2,ease:[.4,0,.2,1]}},exit:{transitionEnd:{visibility:"hidden"},opacity:0,scale:.8,transition:{duration:.1,easings:"easeOut"}}},Xe=O(ve.div),Ye=L(function(n,t){var s,o;const{rootProps:r,motionProps:u,...c}=n,{isOpen:l,onTransitionEnd:f,unstable__animationState:i}=K(),d=Ue(c,t),C=We(r),y=H();return b(O.div,{...C,__css:{zIndex:(o=n.zIndex)!=null?o:(s=y.list)==null?void 0:s.zIndex},children:b(Xe,{variants:Qe,initial:!1,animate:l?"enter":"exit",__css:{outline:0,...y.list},...u,className:N("chakra-menu__menu-list",d.className),...d,onUpdate:f,onAnimationComplete:ye(i.onComplete,d.onAnimationComplete)})})});Ye.displayName="MenuList";var en=L((e,n)=>{const t=H();return b(O.button,{ref:n,...e,__css:{display:"inline-flex",appearance:"none",alignItems:"center",outline:0,...t.button}})}),nn=L((e,n)=>{const{children:t,as:s,...o}=e,r=Be(o,n);return b(s||en,{...r,className:N("chakra-menu__menu-button",e.className),children:b(O.span,{__css:{pointerEvents:"none",flex:"1 1 auto",minW:0},children:e.children})})});nn.displayName="MenuButton";export{Ze as M,nn as a,Ye as b,Je as c,H as u};
