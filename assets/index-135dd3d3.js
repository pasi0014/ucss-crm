import{a as v,A,g as I,r as g,j as e,F as b,b as s,D as M,M as O,c as E,d as _,e as j,f as k,h as R,i as p,k as u,I as D,B as x,u as c,l as L,m as y,H as T,n as C,o as U}from"./index-c9e8d609.js";const $=async r=>{const i={component:"components/DonorForm/calls.createDonor",params:{donor:r}};let a=null;try{console.log("Trying to create Donor",{...i});const n=r,l=localStorage.getItem("accessToken"),o=await v.post(`${A}/v1/donors`,n,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`}});if(o.status===200&&o.data.code.id!==9999)return{success:!0,data:o.data};a=I(o)}catch(n){console.error("Unexpected error while trying to create a Donor",n)}return{success:!1,data:a}},z=r=>{const[i,a]=g.useState(!1),[n,l]=g.useState(null),[o,m]=g.useState({name:"",best_contact:"",lastDonation:"",location:""}),d=h=>{const{name:w,value:F}=h.target;m(S=>({...S,[w]:F}))},t=async()=>{a(!0);try{const h={...o};if(!(await $(h)).success)throw l({type:"error",message:"Unexpected error while trying to create a Donor"}),new Error}catch{console.log("Unexpected error while trying to create a donor")}a(!1)},f=()=>{l(null),a(!1),r.onClose()},B=()=>{m({name:"",best_contact:"",lastDonation:"",location:""})};return e(b,{children:s(M,{isOpen:r.isOpen,onClose:f,size:"md",children:[e(O,{}),s(E,{children:[e(_,{}),e(j,{children:"Add Donor"}),s(k,{children:[n&&e(R,{type:n.type,message:n.message}),s(p,{children:[e(u,{children:"Name"}),e(D,{type:"text",name:"name",value:o.name,onChange:d})]}),s(p,{children:[e(u,{children:"Location"}),e(D,{type:"text",name:"location",value:o.location,onChange:d})]}),s(p,{children:[e(u,{children:"Best Contact"}),e(D,{type:"text",name:"best_contact",value:o.best_contact,onChange:d})]}),e(x,{mt:4,_hover:{bg:c("green.400","green.500")},color:c("white","gray.100"),bg:c("green.500","green.600"),onClick:t,children:"Add Donor"}),e(x,{mt:4,mx:4,_hover:{bg:c("red.200","red.500")},color:c("white","gray.100"),bg:c("red.300","red.600"),onClick:B,children:"Reset Form"})]})]})]})})},V=()=>{L();const[r,i]=g.useState(!1),a=[{header:"ID",accessor:"id"},{header:"Name",accessor:"name"},{header:"Email",accessor:"email"}],n=[{id:"1",name:"John Doe",email:"john.doe@example.com"},{id:"2",name:"Jane Doe",email:"jane.doe@example.com"},{id:"3",name:"Bob Smith",email:"bob.smith@example.com"}],l=t=>{console.log(`Opening record ${t.id}`)},o=t=>{console.log(`Editing record ${t.id}`)},m=()=>{i(!0)},d=()=>{i(!1)};return s(b,{children:[e(y,{textAlign:"left",my:5,p:3,children:e(T,{children:"Donors"})}),e(y,{bg:c("white","gray.700"),px:4,width:"350px",borderRadius:"15px",boxShadow:"base",children:e(C,{h:16,alignItems:"center",justifyContent:"space-between",children:e(C,{alignItems:"center",children:e(x,{variant:"solid",colorScheme:"teal",size:"md",mr:4,onClick:m,children:"Add a donor"})})})}),e(U,{columns:a,items:n,showSearch:!0,onOpenRecord:l,onEditRecord:o,onDeleteRecord:t=>console.log({val:t}),dataDescription:"Donors"}),e(z,{isOpen:r,onClose:d})]})};export{V as default};
