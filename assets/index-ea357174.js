import{x as b,a as N,A,U as v,g as B,r as n,u as i,C as E,b as r,e as d,j as e,T,E as I,I as M,G as k,B as u,S as z,R,H as _}from"./index-82733b58.js";import{D as j}from"./index-2a0be078.js";import{h as D}from"./moment-e9e012b5.js";import{S as g}from"./chunk-XOVTCM5B-9b243b38.js";import{A as U}from"./chunk-VJ54TX72-f424b5a1.js";import{I as H}from"./chunk-3HSDMH4Y-1a70a519.js";import"./chunk-Z3IFIKNA-de6e62c4.js";import"./chunk-3XANSPY5-cf37bc50.js";import"./index-01e141de.js";const Y=async()=>{const s={component:"components/ClientsTable/calls.getClients"};let c=null;try{console.log("Trying to get Clients",{...s});const l=b("_auth"),t=await N.get(`${A}/v1/clients`,{headers:{Authorization:`Bearer ${l}`}});if(t.status===200&&t.data.code.id===v.SUCCESS_CODE)return{success:!0,data:t.data.content};c=B(t)}catch(l){console.error("Unexpected error while trying to get Clients",l)}return{success:!1,data:c}},$=[{header:"First Name",accessor:"firstName",render:s=>e("span",{children:s})},{header:"Last Name",accessor:"lastName",render:s=>e("span",{children:s})},{header:"Phone",accessor:"phone"},{header:"Email",accessor:"email"},{header:"Created At",accessor:"createdAt",render:s=>D(s).tz("America/Toronto").format("DD MMM, YYYY [at] HH:mma")},{header:"Created By",accessor:"createdBy"}],F=()=>{const[s,c]=n.useState([]),[l,t]=n.useState(!0),[L,m]=n.useState(null),[f,p]=n.useState("");i("white","gray.600");const h=i("white","gray.700"),x=i("gray.500","gray.400"),C=E(),S=async({isMounted:a})=>{t(!0),m(null);try{const o=await Y();if(!o.success)throw new Error(o.data);c(o.data)}catch(o){console.error(`Error :: ${o.message}`),m({type:"error",message:o.message})}t(!1)},w=a=>{console.log({term:a})},y=a=>{C(`/clients/${a.id}`)};return n.useEffect(()=>{let a=!0;return a&&S({isMounted:a}),()=>{a=!1}},[]),r(d,{children:[e(d,{bg:h,p:3,borderRadius:"10px",boxShadow:"sm",mb:5,children:r("div",{className:"w-full flex lg:flex-row flex-col items-center",children:[r("div",{className:"flex lg:flex-row flex-col lg:space-x-4 w-full",children:[r(d,{className:"lg:w-8/12 w-full mb-3 flex flex-col",children:[e(T,{className:"text-relaxed font-medium ml-1 mb-2",color:x,children:"Search Client"}),r(I,{children:[e(M,{bg:h,shadow:"md",placeholder:"Search",value:f,onChange:a=>p(a.target.value)}),e(k,{children:e(H,{color:i("gray.600","gray.50"),"aria-label":"Search",icon:e(g,{}),onClick:w})})]})]}),e("div",{className:"w-full flex sm:flex-row flex-col"})]}),r("div",{className:"lg:w-4/12 justify-end w-full mt-3 flex sm:flex-row flex-col",children:[r(u,{variant:"solid",colorScheme:"blue",size:"md",mr:4,onClick:()=>console.log("open"),my:{base:5,sm:15},children:[e(g,{boxSize:3,mr:3}),"Search"]}),r(u,{variant:"solid",colorScheme:"teal",size:"md",mr:4,onClick:()=>console.log("hey"),my:{base:5,sm:15},children:[e(U,{boxSize:3,mr:3}),"Create Client"]})]})]})}),l&&e("div",{className:"flex justify-center",children:e(z,{})}),!!s.length&&e(j,{items:s,columns:$,onOpenRecord:y})]})},X=s=>r(R.Fragment,{children:[e(d,{textAlign:"left",my:5,p:3,children:e(_,{children:"Clients"})}),e(F,{})]});export{X as default};
