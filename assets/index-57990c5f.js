import{a as S,A as v,g as A,r as p,j as e,F as C,b as s,M as I,c as g,d as u,I as D,B as x,u as c,e as y,H as O,f as b}from"./index-82733b58.js";import{D as E}from"./index-2a0be078.js";import{D as _,a as j}from"./chunk-JIPYISAW-16bb16c3.js";import{M as R,a as k,b as L,c as T}from"./chunk-XY72533R-e88ac3d9.js";import{u as U}from"./chunk-CHB4ZXZG-c62fd995.js";import"./chunk-XOVTCM5B-9b243b38.js";import"./chunk-3HSDMH4Y-1a70a519.js";import"./chunk-Z3IFIKNA-de6e62c4.js";import"./chunk-3XANSPY5-cf37bc50.js";import"./index-01e141de.js";import"./chunk-ROURZMX4-1c85f1b1.js";import"./chunk-LB6CWFOC-1198bd88.js";const $=async n=>{const i={component:"components/DonorForm/calls.createDonor",params:{donor:n}};let a=null;try{console.log("Trying to create Donor",{...i});const r=n,l=localStorage.getItem("accessToken"),o=await S.post(`${v}/v1/donors`,r,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`}});if(o.status===200&&o.data.code.id!==9999)return{success:!0,data:o.data};a=A(o)}catch(r){console.error("Unexpected error while trying to create a Donor",r)}return{success:!1,data:a}},z=n=>{const[i,a]=p.useState(!1),[r,l]=p.useState(null),[o,m]=p.useState({name:"",best_contact:"",lastDonation:"",location:""}),d=h=>{const{name:w,value:F}=h.target;m(M=>({...M,[w]:F}))},t=async()=>{a(!0);try{const h={...o};if(!(await $(h)).success)throw l({type:"error",message:"Unexpected error while trying to create a Donor"}),new Error}catch{console.log("Unexpected error while trying to create a donor")}a(!1)},f=()=>{l(null),a(!1),n.onClose()},B=()=>{m({name:"",best_contact:"",lastDonation:"",location:""})};return e(C,{children:s(_,{isOpen:n.isOpen,onClose:f,size:"md",children:[e(R,{}),s(j,{children:[e(k,{}),e(L,{children:"Add Donor"}),s(T,{children:[r&&e(I,{type:r.type,message:r.message}),s(g,{children:[e(u,{children:"Name"}),e(D,{type:"text",name:"name",value:o.name,onChange:d})]}),s(g,{children:[e(u,{children:"Location"}),e(D,{type:"text",name:"location",value:o.location,onChange:d})]}),s(g,{children:[e(u,{children:"Best Contact"}),e(D,{type:"text",name:"best_contact",value:o.best_contact,onChange:d})]}),e(x,{mt:4,_hover:{bg:c("green.400","green.500")},color:c("white","gray.100"),bg:c("green.500","green.600"),onClick:t,children:"Add Donor"}),e(x,{mt:4,mx:4,_hover:{bg:c("red.200","red.500")},color:c("white","gray.100"),bg:c("red.300","red.600"),onClick:B,children:"Reset Form"})]})]})]})})},Z=()=>{U();const[n,i]=p.useState(!1),a=[{header:"ID",accessor:"id"},{header:"Name",accessor:"name"},{header:"Email",accessor:"email"}],r=[{id:"1",name:"John Doe",email:"john.doe@example.com"},{id:"2",name:"Jane Doe",email:"jane.doe@example.com"},{id:"3",name:"Bob Smith",email:"bob.smith@example.com"}],l=t=>{console.log(`Opening record ${t.id}`)},o=t=>{console.log(`Editing record ${t.id}`)},m=()=>{i(!0)},d=()=>{i(!1)};return s(C,{children:[e(y,{textAlign:"left",my:5,p:3,children:e(O,{children:"Donors"})}),e(y,{bg:c("white","gray.700"),px:4,width:"350px",borderRadius:"15px",boxShadow:"base",children:e(b,{h:16,alignItems:"center",justifyContent:"space-between",children:e(b,{alignItems:"center",children:e(x,{variant:"solid",colorScheme:"teal",size:"md",mr:4,onClick:m,children:"Add a donor"})})})}),e(E,{columns:a,items:r,showSearch:!0,onOpenRecord:l,onEditRecord:o,onDeleteRecord:t=>console.log({val:t}),dataDescription:"Donors"}),e(z,{isOpen:n,onClose:d})]})};export{Z as default};
